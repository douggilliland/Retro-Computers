LABEL,OPCODE,REG_LABEL,OFFSET_ADDR,COMMENT,V3.0.0
START,JSR,INITVDU,,INITIALIZE THE VDU,
,JSR,INITURT,,INITIALIZE THE ACIA UART,
CLRSCR,LRI,0X01,0X0C,ANSI CLEAR THE SCREEN CMD,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
YELLOW,LRI,0X01,0X1B,ESC SEQ FOR YELLOW CHARS,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X5B,[,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X33,3,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X33,3,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X6D,m ,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
BANNER,LRI,0X01,0X50,'P’,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X44,'D’,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X50,'P’,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X2D,'-’,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X38,'8’,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
CHKSRC,IOR,0X01,0X07,CHECK THE SERIAL ROUTE,
,ARI,0X01,0X01,MASK BITS (USES ALU),
,BEZ,USEUSB,,USING VDU,
USEVDU,LRI,0X01,0X20,SPACE,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X56,'V’,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X44,'D’,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X55,'U’,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X0D,CR,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X0A,LF,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
LOOP,JSR,KB2PDP,,KEYBOARD TO PDP-8,
,JSR,PDP2VDU,,PDP-8 TO VGA,
,JMP,LOOP,,LOOP FOREVER,
KB2PDP,IOR,0X00,0X04,READ KBD STATUS,
,ARI,0X00,0X01,MASK RX DATA PRESENT BIT,
,BEZ,NOKDBD,,NO KBD DATA,
WAIT1,IOR,0X00,0X02,READ VDU STATUS,
,ARI,0X00,0X02,CHECK TX EMPTY FLAG,
,BEZ,WAIT1,,WAIT UNTIL TX EMPTY,
,IOR,0X01,0X05,READ KBD DATA,
,ORI,0X01,0X80,MARK PARITY,
,IOW,0X01,0X01,WRITE TO UART DATA,
NOKDBD,RTS,,,DONE KEYBOARD TO UART,
PDP2VDU,IOR,0X00,0X00,PDP-11 TO VDU,
,ARI,0X00,0X01,MASK RX DATA PRESENT BIT,
,BEZ,NOPDPD,,NO UART DATA,
WTVDU,IOR,0X00,0X02,READ VDU STATUS,
,ARI,0X00,0X02,TX EMPTY FLAG,
,BEZ,WTVDU,,WAIT UNTIL TX EMPTY,
RDURT1,IOR,0X01,0X01,READ UART DATA,
,ARI,0X01,0X7F,8 TO 7 BITS,
,IOW,0X01,0X03,WRITE OUT SCREEN,
NOPDPD,RTS,,,DONE UART TO VGA,
INITVDU,LRI,0X00,0X03,RESET TERMINAL COMMAND,
,IOW,0X00,0X02,WRITE VDU CMD REG,
,LRI,0X00,0X20,TX CTRLS RTS,
,IOW,0X00,0X02,WRITE VDU CMD REG,
,RTS,,,,
INITURT,LRI,0X00,0X03,RESET UART COMMAND,
,IOW,0X00,0X00,WRITE UART CMD REG,
,LRI,0X00,0X20,TX CTRLS RTS,
,IOW,0X00,0X00,WRITE UART CMD REG,
,RTS,,,,
WR2VDU,IOR,0X00,0X02,READ VDU STATUS,
,ARI,0X00,0X02,TX EMPTY FLAG,
,BEZ,WR2VDU,,WAIT UNTIL TX EMPTY,
,IOW,0X01,0X03,WRITE OUT R1 TO SCREEN,
,RTS,,,,
USEUSB,LRI,0X01,0X20,SPACE,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X55,'U’,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X53,'S’,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
,LRI,0X01,0X42,'B’,
,JSR,WR2VDU,,WRITE OUT CHAR IN R1,
SELF,JMP,SELF,,,
