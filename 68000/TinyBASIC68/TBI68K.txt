†††††The† following† is† the† originaÏ† manuscript† for† the ç
†††††article† 'Tiny† BASIC comes to the 68000ß published† in ç
†††††the February 198µ issue of DrÆ† Dobbs's JournalÆ†  This ç
†††††manuscript is copyright (c© 198¥ by Gordon Brandly† and ç
†††††is† distributed† with the permission of Gordon† Brandly ç
†††††and DrÆ Dobb's Journal.



                  Tiny BASIC Comes to the 68000

                                     by Gordon Brandly
                                        R. R. 2
                                        Fort Sask., AB, CANADA
                                        T8L 2N8


     Remember† the good old days?†  When the 8080† microprocessor ç
reigned† supreme,† 8K of memory cost an arm and a leg,† ah yes..Æ  ç
WelÏ the years went by,† microcomputers got bigger, software grew ç
more† sophisticated,† and prices went upÆ†  This is just fine† of ç
course,† if you can afford the higher pricesÆ  The less fortunate ç
among us, however, must build or buy smaller 16-bit "educational¢ ç
systemsÆ†  This is fine too,† if you don't mind having hardly any ç
softwareÆ†  This is the just the sort of situation that gave rise ç
to DrÆ† Dobb's JournaÏ in the 'good old days'Æ  The solution back ç
then† was† to† publish a tiny BASIC† interpreter† that† could† be ç
adapted† to† just† about any† 8080† microcomputer† aroundÆ†  This ç
solution† worked† fabulously and gave many a hobby† computer† its ç
first† taste of usefuÏ softwareÆ†  Well,† if the solution† worked ç
once, why not again?  I therefore decided to produce a tiny BASIC ç
interpreter† for† alÏ† of† you who have† relatively† smalÏ† 68000 ç
systems† such as the Motorola Education Computer Board,† the† EM” ç
68000 board, etc.
     To produce this BASIC I took one of the most successfuÏ 8080 ç
Tiny† BASICs,† LÈ Chen Wang's Palo Alto Tiny BASIC (published† in ç
the† May 197∂ DrÆ† Dobb's Journal© and translated it† into† 68000 ç
codeÆ†  I† then† added† a few features and optimized the† code† a ç
little bit, producing a surprisingly usable interpreter.
     First, I'lÏ describe the differences between my interpreter, ç
Palo† Alto Tiny BASIC,† and the ubiquitous Microsoft† BASICsÆ†  I ç
wilÏ† then† describe how you can instalÏ this† software† on† your ç
68000†† systemÆ††  Finally,†† I'lÏ† give† my† evaluation† of† the ç
interpreter's present performance and how it can be improved.



Features

     For those who know the originaÏ Palo Alto Tiny BASIC (or the ç
Sherry† Brothersß version on CP/M User's Group† Volume† 11),† you ç
wilÏ† find† this interpreter very similarÆ†  I have made† two† or ç
three† changes to the interpreter's synta¯ to bring it closer† to ç
the† de† facto† Microsoft 'standard'Æ†  The colon (":"©† is† used çäinstead† of the semi-colon (";"© to separate multiple† statements ç
on a lineÆ†  The inequality operator "#¢ has been changed to† the ç
more standard "<>¢ Æ†  I also added the PEEK,† POKE,† CALL,† BYE, ç
LOAD, and SAVE commands, described later.
     For those of you used to a bigger BASIC, such as the various ç
Microsoft† interpreters,† you'lÏ† find† that this† version† works ç
almost† the† same within its† limitationsÆ†  Following† are† some ç
excerpts† from LÈ Chen Wang's originaÏ documentation,† mixed with  ç
descriptions of my extensions:




The Language


Numbers:

In this Tiny BASIC,† alÏ numbers are 32-bit integers and must† be ç
in† the range 2,147,483,64∑ to -2,147,483,648Æ†  I decided to use ç
3≤† bits† so† that the PEEÀ and POKE commands† could† access† the ç
entire† address range of the 68000Æ†  This slows down† arithmetic ç
operations somewhat,† but sticking to 1∂ bits would have produced ç
unneccessary complications.


Variables:

There are 2∂ variables denoted by the letters ¡ through ZÆ† There ç
is also a single array @(I)Æ† The dimension of this array† (i.e., ç
the† range of value of the inde¯ I© is set automatically to† make ç
use† of† alÏ the memory space that is left unused by the† program ç
(i.e.,† 0† through SIZE/4,† see the SIZE† function† below)Æ†  AlÏ ç
variables and array elements are ¥ bytes long.


Functions:

There are 4 functions:

     ABS(X) gives the absolute value of X.

     RND(X) gives a random number between 1 and X (inclusive).

     SIZE gives the number of bytes left unused by the program.

     PEEK(X) gives the value of the byte at memory location X.


LET Command:

     LET A=234-5*6, A=A/2, X=A-100, @(X+9)=A-1

WilÏ† set† the variable ¡ to the value of the expression† 234-5*∂ ç
(i.eÆ† 204),† set† the† variable ¡ (again© to the† value† of† the ç
äexpression A/≤ (i.eÆ 102), set the variable ÿ to the value of the ç
expression A-100 (i.eÆ 2), and then set the variable @(11© to 10± ç
(where 1± is the value of the expression X+π and 10± is the value ç
of the expression A-1).


Print Command:

     PRINT A*3+1, "abc 123 !@#", ' cba '

WilÏ† print† the value of the expression A*3+±† (i.eÆ† 307),† the ç
string† of characters "abc 12≥ !@#¢ and the string¢† cba† ",† and ç
then† a CR-L∆ (carriage return and line feed)Æ† Note that† either ç
single† or double quotes can be used to quote strings,† but pairs ç
must† be† matchedÆ† If there is a comma at the end of† the† print ç
command,† the† finaÏ CR-L∆ wilÏ not be printedÆ†  Note also† that ç
commas are used to separate adjacent items (most other BASICs use ç
the semi-colon to perform this function.)

     PRIN‘ A, B, #3, C, D, E, #10, F, G

WilÏ print the values of ¡ and M in 1± spaces,† the values of† C, ç
D,† and E in ≥ spaces, and the values of ∆ and « in 10 spacesÆ If ç
there† aren't† enough† spaces specified for a given value† to† be ç
printed, the value wilÏ be printed in fulÏ anyway.

     PRIN‘ 'abc',_,'xxx'

WilÏ† print the string "abc",† a C“ without a LF,† and† then† the ç
string "xxx¢ (over the "abc"© followed by a CR-LF.


INPUT Command:

     INPUT A, B

When† this† command is executed,† Tiny BASIC wilÏ print "A:¢† and ç
wait† to read in an expression from the consoleÆ† The variable† ¡ ç
wilÏ be set to the value of this expression, then "B:¢ is printed ç
and† variable M is set to the value of the next† expression† read ç
inÆ† Note† that† complete expressions as welÏ as numbers† can† be ç
enteredÆ†  This† gives rise to an interesting trick∫† you can set ç
the variable Ÿ to an unusuaÏ value,† e.gÆ 9999, and use it to get ç
the answer to a yes-or-no question, such as

     10 Y=999π ∫ INPU‘ 'Are you sleepy?'¡ ∫ I∆ A=Ÿ GOTœ 100

This† works† because the user can answer the† question† with† the ç
expression† 'Y',† which† puts the numeric value of Ÿ into† the† ¡ ç
variable.


     INPU‘ 'What is the weight'A, "and size"B

This† is† the† same as the first INPU‘ example† except† that† the çäprompt† 
"A:¢ is replaced by "What is the weight:¢ and the† prompt ç
"B:¢ is replaced with "and size:"Æ† Again, both single and double ç
quotes can be used as long as they are matched.

     INPU‘ A, 'string',_, "another string", B

The strings and the "_¢ have the same effect as in "PRINT".


POKE Command:

     POKE 4000+X,Y

This† command puts the value produced by expression "Y¢ into† the ç
byte memory location specified by the expression "4000+X".


CALL Command:

     CALL X

This† command† wilÏ† calÏ a machine language† subroutine† at† the ç
address† specified† by† the† expression "X"Æ† AlÏ† of† the† CPU's ç
registers except the stack pointer can be used in the subroutine.


BYE Command:

WilÏ return controÏ to the resident monitor program or† operating ç
system.


SAVE Command:

WilÏ† save your BASIC program on the storage device you† provideÆ ç
Details† on installing this device are given in the source† codeÆ ç
As† set up for the EducationaÏ Computer Board,† this command wilÏ ç
send† the† program out to the host computer in† an† easily-stored ç
text formÆ† It isn't,† however, human-readable program text since ç
the line numbers are stored in hexadecimal.


LOAƒ Command:

WilÏ delete the program in memory and load in a program from your ç
storage device.


Stopping Program Execution:

The† execution† of the program or listing of the program† can† be ç
stopped†† by†† pressing† the† control-√† key† on†† the†† consoleÆ ç
Additionally,† a† program† listing† can† be† paused† by† pressing ç
control-S, and then pressing any key to continue.
ä
Abbreviations and Blanks:

You† may use blanks freely within a program except that† numbers, ç
command† key† words,† and† function names† cannot† have† embedded ç
blanks.
     You may abbreviate alÏ command key words and function† names ç
and follow each by a periodÆ†  For instance, "P.", "PR.", "PRI.", ç
and† "PRIN.¢† alÏ† stand† for "PRINT"Æ†  The word† "LET¢† in† LE‘ ç
commands may also be omittedÆ† The shortest abbreviations for alÏ ç
the key words are as follows:

A.=ABS    C.=CALL   F.=FOR    GOS.=GOSUB     G.=GOTO

IF=IF     I.=INPUT  L.=LIST   LO.=LOAD       N.=NEW

N.=NEXT   P.=PEEK   PO.=POKE  P.=PRINT       REM=REMARK

R.=RETURN†R.=RND    R.=RUN    S.=SAVE        S.=SIZE

S.=STEP   S.=STOP   TO=TO

no key word Ω LET

Take note that,† in some cases, the same abbreviation can be used ç
for† different key wordsÆ†  The interpreter is 'smartß enough† to ç
use† the† correct† key word† for† a† particular† situationÆ†  For ç
instance,† if the abbreviation "P.¢ appears at the beginning of a ç
line,† it can only mean PRINTÆ  In a statement like "A=P.(8)¢ the ç
"P.¢ only makes sense if it stands for PEEK.


Error Reports:

There† are† only three error conditions in Tiny BASICÆ† The† line ç
containing the error is printed out with a question mark inserted ç
at the point where the error is detected.

(1© "What?¢ means that there is an error in a statement's syntax.

For example:

     What?

     260 LET A=B+3, C=(3+4?. X=4

(2©† "How?¢ means that the statement in question is OK,† but† for ç
some reason the command can't be carried out.

     How?

     310 LET A=B*C?+2 †  <- where B*C is larger than 2147483647

     How?
ä     380 GOTO 412? ††††† <- where line 412 does not exist

(3© "Sorry.¢ means that the interpreter understands the statement ç
and knows how to do it,† but there isn't enough memory† available ç
to accomplish the task.


Error Corrections:

If you notice an error in your entry before you press RETURN, you ç
can† delete† characters† with the backspace† (control-H©† key† or ç
delete† the† entire line with control-XÆ†  To delete an† existing ç
program line, just type the line number and press RETURN.




Installation

     Now,† how† do† you get this wonderful(?© piece† of† software ç
running† on† your computer?†  Very easily,† if you have† a† setup ç
similar to mineÆ†  Other systems should also be fairly easy going ç
if you have access to a 68000 assembler of some kindÆ†  My† setup ç
is† a† Motorola† MEX68KECM EducationaÏ Computer† Board† connected ç
between† my† terminaÏ and my CP/M systemÆ†  The source† code† was ç
assembled† with the Quelo version 1.π public domain 68000† cross-ç
assembler for CP/MÆ†  (By the way,† if you use this assembler you ç
wilÏ get 3∂ "trim1∂ address¢ errors, which is normalÆ  You do get ç
what you pay for...©  Tiny BASIC is then loaded into the ECM† and ç
executed at the 'cold startß address of he¯ 900Æ†  BASIC programs ç
are† saved† and loaded by setting up an appropriate CP/M† command ç
before† using† SAVE† or† LOADÆ††  For† example† (user† input†† is ç
underlined):

     After a program is written, exit to the monitor:

          > 	BYE	

     Enter† transparent† mode:

          TUTOR 1.x> 	TM	

     Issue a PI– command to the CP/M host:

          A> 	PIP PROGRAM.BAS=CON:	

     Exit transparent mode and do a BASIC 	warm start	:

          TUTOR 1.x> 	GO 904	

     Do the actual save:

          	SAVE	

     The† 'warm startß mentioned above is an entry point into the çäinterpreter† that wilÏ preserve any program you may have† already ç
entered.
     Program† LOADs are done similarly except† that,† instead† of ç
PIP,† you† must† run a smalÏ program that wilÏ wait to receive† a ç
carriage return before sending the program to the ECBÆ† Here is a ç
sample program in Microsoft BASIC:

     10 INPUT "Program to send?";F$

     20 OPEN "I",1,F$

     30 INPUT "Now exit Transparent Mode and do a LOAD.";Z$

     40 WHILE NOT EOF(1):LINE INPUT #1,A$:PRINT A$:WEND


     Admittedly† this† way† of LOADing and SAVEing† is† a† fairly ç
comple¯† procedure,† but it allows you to keep your† programs† on ç
disk† while† keeping the interpreter itself smallÆ†  If your† ECM ç
isn't connected to another computer you could probably change the ç
AUXIŒ† and AUXOU‘ subroutines to use the cassette† interfaceÆ† (I ç
haven't tried it, thoughÆ  Caveat emptor!)
     For† other 68000 systems,† you wilÏ probably have to† modify ç
only the OUTC, INC, AUXOUT, AUXIN, and BYEBYE routines at the end ç
of† the† interpreter programÆ†  In addition,† you† must† put† the ç
address of the first unavailable memory location above BASIC into ç
the location 'ENDMEM'Æ†  BASIC programs are SAVEd in a form which ç
can† be stored as ASCII text and read back quickly by the† 68000Æ  ç
If† your storage device can't handle the present format or if you ç
would like the program saved in a human-readable form,† you† need ç
only modify the SAVE and LOAƒ subroutines.
     One† warning∫† the† DIREC‘† and EXE√ routines† were† written ç
assuming† that the interpreter itself would be somewhere† in† the ç
first 64À of memory ($0 to $FFFF)Æ  If you move it above 64K, you ç
wilÏ† have† to modify the EXE√ routine and check the rest of† the ç
code carefully to make sure the addressing modes are correct.



Evaluation

     I† am† quite pleased with how the† interpreter† turned† outÆ  ç
Even though I added extra error checking,† lower case conversion, ç
more† commands,† and extended the variable size to 3≤† bits,† the ç
whole thing wilÏ stilÏ fit inside 3À bytes of memoryÆ†  I ran the ç
Sieve† of† Eratosthenes† benchmark program† (included† with† this ç
article© on this interpreter and on the Sherry Brothers CP/M tiny ç
BASIC with the following result:

	68000 at 4 MHz           Z80 at 4 MHz	

2670 seconds             3000 seconds

     The† results are adjusted for the usuaÏ 10 iterations of the ç
basic† algorithm,† but the program was actually only run for† one çäiteration to keep running times within a practicaÏ† limitÆ†  This ç
tiny† BASIC may not be a speed demon,† but it does beat Applesoft ç
and PE‘ BASIC at running the Sieve benchmarkÆ†  I should add that ç
the Sieve program listing was compressed to the maximum for speed ç
considerationsÆ†  I normally use more spaces and some comments so ç
that† I can figure out later on what the program was supposed† to ç
do!
     Of course there are many, many improvements that can be made ç
given more available memoryÆ†  My EducationaÏ Computer Board† has ç
32À† bytes of memory,† so I wilÏ probably add such things as more ç
variables,† strings,† and† keyword tokenizationÆ†  The last is† a ç
method used by most BASIC interpreters to compress key words such ç
as LET,† PRINT, etcÆ into single bytesÆ  This would greatly speed ç
up† the† interpreter while using less memory to store† the† BASIC ç
programÆ  Who says you can't have your cake and eat it too?



Availability

     By the time you read this,† the interpreter source code† and ç
some† example† programs† should be available on a couple† of† the ç
RCP/M bulletin board systems in my area:

          Meadowlark RCP/M - (403) 484-5981

          Edmonton RCP/M - (403) 454-6093

     The Edmonton RCP/M accepts both 300 and 1200 baud,† and† the ç
Meadowlark† system† only allows access to its CP/M area† at† 1200 ç
baudÆ†  Both systems run 2¥ hours a dayÆ†  The interpreter source ç
code is known as TBI68K.AQM, which is a 'squeezedß text fileÆ  If ç
you† don't have a MODEM∑ type program and a way to unsqueeze this ç
file,† you† can use these systemsß LIS‘ command to list† out† the ç
source† code† while† you† capture it† with† a† telecommunications ç
programÆ  ¡ short documentation file, TBI68K.DQC, and some sample ç
programs, TBIPROGS.LBR, are also availableÆ  The latter is a CP/M ç
library file,† which contains severaÏ programsÆ  You can list the ç
libary's contents with the LDI“ command,† and extract† individuaÏ ç
programs using either the systemsß XMODEM or LTYPE commandsÆ  The ç
Quelo† cross-assembler† is† also† sometimes† available† on† these ç
systems under the names A68K.COM and A68K.DOCÆ  
     Though† I'd prefer that you obtain the source code from† one ç
of the above sources,† for $20 I can also provide the code in the ç
following† forms∫†  8-inch CP/M SSSƒ diskette,† 5-inch Osborne or ç
Apple CP/M diskettes, or a paper listing.
     If† you† find† any† bugs in† the† interpreter† or† have† any ç
questions,† please† write to me or contact me on the above† RCP/M ç
systemsÆ  Enjoy!
                                                                                               
                        Documentation for
             Gordo's MC68000 Tiny BASIC version 1.0


     This† is† an adaptation of LÈ Chen Wang's† 'Palo† Alto† Tiny ç
BASICß for the Motorola MC68000 microprocessorÆ† It includes more ç
functions and program save and loadÆ As distributed, it is set up ç
for† a Motorola MEX68KECM EducationaÏ Computer Board connected to ç
a† host† CP/M computerÆ† The source code should give† you† enough ç
details to allow you to instalÏ it on a different systemÆ† If you ç
have any problems, you can write to me at:
     Gordon Brandly
     R.R. 2
     Fort Sask., AB, Canada
     T8L 2N8


                          The Language

Numbers

In† this Tiny BASIC,† alÏ numbers are integers and must be in the ç
range 2147483647 to -2147483648.


Variables

There are 2∂ variables denoted by the letters ¡ through ZÆ† There ç
is† also a single array @(I)Æ† The dimension of this array (i.e., ç
the† range of value of the inde¯ I© is set automatically to† make ç
use† of alÏ the memory space that is left unused by† the† program ç
(i.e.,† 0 through SIZE/4, see SIZE function below)Æ AlÏ variables ç
and array elements are ¥ bytes long.


Functions

There are 4 functions:
     ABS(X) gives the absolute value of X.
     RND(X) gives a random number between 1 and X (inclusive).
     SIZE gives the number of bytes left unused by the program.
     PEEK(X) gives the value of the byte at memory location X.

Arithmetic and Compare Operators

     Ø    DivideÆ†(Note that since we have integers only, 2/3=0)
     *    Multiply.
     -    Subtract.
     +    Add.
     >    Greater than. (comparison)
     <    Less than. (comparison)
     =    EquaÏ toÆ† (comparison©   Note that to certain versions ç
††††††††††of BASIC "LE‘ A=B=0¢ means "set both ¡ and M to 0"Æ† To ç
††††††††††this† version† of Tiny BASIC,† it means "set ¡† to† the çä††††††††††result of comparing M with 0".
     <>   Not equal to. (comparison)
     >=   Greater than or equal to. (comparison)
     <=   Less than or equal to. (comparison)

+,† -,† *,† and Ø operations result in values between -214748364∑ ç
and 2147483647Æ† (-214748364∏ is also allowed in some cases.© AlÏ ç
compare operators result in a ± if true and a 0 if not true.


Expressions

Expressions† are formed with numbers,† variables,† and† functions ç
with arithmetic and compare operators between themÆ ´ and - signs ç
can also be used at the beginning of an expressionÆ† The value of ç
an expression is evaluated from left to right,† except that ™ and ç
Ø† are† always done first,† and then ´ and - ,† and then† compare ç
operatorsÆ† Parentheses† can also be used to alter the† order† of ç
evaluationÆ† Note† that† compare† operators can be† used† in† any ç
expression. For example:

     10 LET A=(X>Y)*123+(X=Y)*456+(X<Y)*789
     20 IF (U=1)*(V<2)+(U>V)*(U<99)*(V>3) PRINT "Yes"
     30 LET R=RND(100), A=(R>3)+(R>15)+(R>56)+(R>98)

In line 10,† ¡ wilÏ be set to 12≥ if X>Y,† to 45∂ if X=Y,† and to ç
78π if X<YÆ In line 20, the "*¢ operator acts like a logicaÏ AND, ç
and the "+¢ operator acts like a logicaÏ ORÆ† In line 30,† ¡ wilÏ ç
be a random number between 0 and ¥ with a prescribed† probability ç
distribution of∫ 3• of being 0, 15-3=12• of being 1, 56-15=41• of ç
being 2, 98-56=42• of being 3, and 100-98=2• of being 4.


Program Lines

¡† Tiny BASIC line consists of a line number between ± and† 6553¥ ç
followed† by one or more commandsÆ† Commands in the same line are ç
separated by a colon ":"Æ
     "GOTO",† "STOP",† and† "RETURN¢† commands must be† the† last ç
command on any given line.


Program

¡ Tiny BASIC program consists of one or more linesÆ When a direct ç
command† "RUN¢† is issued,† the line with the† lowest† number† is ç
executed† first,† then the one with the next lowest line† number, ç
etcÆ† However, the "GOTO", "GOSUB", "STOP", and "RETURN¢ commands ç
can† alter† this normaÏ sequenceÆ† Within a† line,† execution† of ç
commands† is from left to rightÆ† The "IF¢ command can cause† the ç
remaining commands on the same line to be skipped over.


Commands
äTiny BASIC commands are listed below with examplesÆ Remember that ç
multiple commands can be put on one line if colons separate themÆ ç
In† order to store the line,† you must also have a line number at ç
the beginning of the lineÆ† (The line number and multiple-command ç
lines aren't shown in the examples.


REM or REMARK Command

REM anything goes

This line will be ignored by Tiny BASIC.


LET Command

LET A=234-5*6, A=A/2, X=A-100, @(X+9)=A-1

WilÏ† set† the variable ¡ to the value of the expression† 234-5*∂ ç
(i.eÆ† 204),† set† the† variable ¡ (again© to the† value† of† the ç
expression A/≤ (i.eÆ 102), set the variable ÿ to the value of the ç
expression A-100 (i.eÆ 2), and then set the variable @(11© to 10± ç
(where 1± is the value of the expression X+π and 10± is the value ç
of the expression A-1).

LET U=A<>B, V=(A>B)*X+(A<B)*Y

WilÏ† set the variable ’ to either ± or 0 depending on whether† ¡ ç
is† not† equaÏ† to or is equaÏ to Bª† and set the variable† ÷† to ç
either† X,† Ÿ or 0 depending on whether ¡ is greater† than,† less ç
than, or equaÏ to B.


Print Command

PRINT

WilÏ† cause† a carriage-return (CR© and a line-feed (LF©† on† the ç
output device.

PRINT A*3+1, "abc 123 !@#", ' cba '

WilÏ† print the value of the expression† A*3+±† (i.eÆ† 307),† the ç
string† of† characters "abc 12≥ !@#¢ and the string¢ cba† ",† and ç
then† a CR-LFÆ† Note that either single or double quotes† can† be ç
used to quote strings, but pairs must be matched.

PRINT A*3+1, "abc 123 !@#", ' cba ',

WilÏ produce the same output as before,† except that there is† no ç
CR-L∆† after the last item printedÆ† This enables the program† to ç
continue printing on the same line with another "PRINT".

PRINT A, B, #3, C, D, E, #10, F, G
äWilÏ† print the values of ¡ and M in 1± spaces,† the values of C, ç
D,† and E in ≥ spaces, and the values of ∆ and « in 10 spacesÆ If ç
there† aren't† enough† spaces specified for a given value† to† be ç
printed, the value wilÏ be printed in fulÏ anyway.

PRINT 'abc',_,'xxx'

WilÏ† print the string "abc",† a C“ without a LF,† and† then† the ç
string "xxx¢ (over the "abc"© followed by a CR-LF.


INPUT Command

INPUT A, B

When† this† command is executed,† Tiny BASIC wilÏ print "A:¢† and ç
wait to read in an expression from the input deviceÆ The variable ç
¡† wilÏ† be set to the value of this† expression,† then† "B:¢† is ç
printed and variable M is set to the value of the next expression ç
read† from the input deviceÆ† Note that whole expressions as welÏ ç
as numbers can be entered.

INPUT 'What is the weight'A, "and size"B

This is the same as the command above,† except the prompt "A:¢ is ç
replaced by "What is the weight:¢ and the prompt "B:¢ is replaced ç
with† "and size:"Æ† Again,† both single and double quotes can† be ç
used as long as they are matched.

INPUT A, 'string',_, "another string", B

The strings and the "_" have the same effect as in "PRINT".


POKE Command

POKE 4000+X,Y

This† command puts the value produced by expression "Y¢ into† the ç
byte memory location specified by the expression "4000+X".


CALL Command

CALL X

This† command† wilÏ† calÏ a machine language† subroutine† at† the ç
address† specified† by† the expression† "X"Æ† AlÏ† of† the† CPU's ç
registers†† (except† the† stack† pointer©† can† be† used† in† the ç
subroutine.


IF Command

IF A<B LET X=3: PRINT 'this string'ä
This wilÏ test the value of the expression A<BÆ† If it isn't zero ç
(i.eÆ† if it is true), the rest of the commands on this line wilÏ ç
be executedÆ† If the value of the expression is zero (i.eÆ† if it ç
is† not† true),† the rest of this line wilÏ be skipped† over† and ç
execution continues on the next lineÆ† Note that the word† "THEN¢ ç
is not used.


GOTO Command

GOTO 120

WilÏ† cause execution to jump to line 120Æ† Note that the† "GOTO¢ ç
command cannot be followed by a colon and other commandsÆ It must ç
be ended with a CR.

GOTO A*10+B

WilÏ† cause† the execution to jump to a different line number† as ç
computed from the value of the expression.


GOSUB and RETURN Commands

GOSUB 120

Will cause execution to jump to line 120.

GOSUB A*10+B

WilÏ cause execution to jump to different lines as computed† from ç
the value of the expression A*10+B.

RETURN

¡† RETURŒ command must be the last command on a line and must† be ç
followed by a CRÆ† When a RETURŒ command is encountered,† it wilÏ ç
cause† execution† to jump back to the command following the† most ç
recent GOSUM command.
     GOSUB's can be nested with a depth limited only by the stack ç
space.


FOR and NEXT Commands

FOR X=A+1 TO 3*B STEP C-1

The† variable ÿ is set to the value of the† expression† A+1Æ† The ç
values† of† the expressions (not the expressions themselves©† 3*M ç
and† C-± are rememberedÆ† The name of the variable† X,† the† line ç
number† and the position of this command within the line are also ç
rememberedÆ† Execution then continues the normaÏ way untiÏ a NEX‘ ç
command is encountered.
     The step can be positive,† negative or even zeroÆ† The† word çäSTE–† and† the† expression† following it can be† omitted† if† the ç
desired step is +1.

NEXT X

The† name† of† the variable ÿ is checked with that† of† the† most ç
recent† FO“† commandÆ† If they do not agree,† then† that† FO“† is ç
terminated and the next recent FO“ is checked,† etcÆ When a match ç
is found, this variable wilÏ be set to its current value plus the ç
value† of† the† step expression saved by† the† FO“† commandÆ† The ç
updated† value† is† then† compared† with† the† value† of† the† Tœ ç
expression† also† saved by the FO“ commandÆ† If this† within† the ç
limit,† execution wilÏ jump back to the command following the FO“ ç
commandÆ† If† this† is† outside the† limit,† execution† continues ç
following the NEX‘ command itself.
     FOR's† can also be nested with a depth limited only† by† the ç
stack spaceÆ† If a new FO“ command with the same controÏ variable ç
as that of an old FO“ command is encountered, the old FO“ wilÏ be ç
terminated automatically.


STOP Command

STOP

This† command† stops† the execution of the† program† and† returns ç
controÏ† to direct commands from the consoleÆ† It can appear many ç
times† in† a program but must be the last command† on† any† given ç
line, i.eÆ it cannot be followed by a colon and other commands.


BYE Command

WilÏ† return† you† to the resident monitor program† or† operating ç
systemÆ  (Tutor in the case of the ECB.)


Direct Commands

As defined earlier,† a line consists of a line number followed by ç
commandsÆ† If† the† line number is missing,† or if it is† 0,† the ç
commands† wilÏ be executed after you have typed the CRÆ† AlÏ† the ç
commands† described above can be used as direct† commandsÆ† There ç
are† five† more commands that can be used as direct commands† but ç
not as part of a program line:

RUN

WilÏ† start† to† execute† the† program† starting† at† the† lowest ç
line number.

LIST

WilÏ print out alÏ the lines in numericaÏ order.
äLIST 120

WilÏ† print out alÏ the lines in numericaÏ order starting at line ç
120.

NEW

Will delete the entire program.

SAVE

WilÏ save the present program on the storage device you† provideÆ ç
Details† on installing this device are given in the source† codeÆ ç
As† set† up for the MEX68KECM EducationaÏ† Computer† Board,† this ç
command† wilÏ† send† the program out to the host computer† in† an ç
easily-stored text formÆ† It isn't, however, pure program text as ç
the line numbers are stored in hexadecimal.

LOAD

WilÏ† delete† the program in memory and load in a file from† your ç
storage device.


Stopping Program Execution

The† execution† of the program or listing of the program† can† be ç
stopped†† by†† pressing† the† control-√† key† on†† the†† consoleÆ ç
Additionally,† a listing can be paused by pressing control-S, and ç
then pressing any key to continue.


Abbreviations and Blanks

You† may use blanks freely within a program except that† numbers, ç
command† key† words,† and† function names† cannot† have† embedded ç
blanks.
     You† may† truncate alÏ command key words and function† names ç
and follow each by a periodÆ†  "P.",† "PR.",† "PRI.", and "PRIN.¢ ç
alÏ stand for "PRINT"Æ† The word LE‘ in LE‘ commands may also† be ç
omittedÆ† The shortest abbreviations for alÏ the key words are as ç
follows:
A.=ABS    C.=CALL   F.=FOR    GOS.=GOSUB     G.=GOTO
IF=IF     I.=INPUT  L.=LIST   LO.=LOAD       N.=NEW
N.=NEXT   P.=PEEK   PO.=POKE  P.=PRINT       REM=REMARK
R.=RETURN†R.=RND    R.=RUN    S.=SAVE        S.=SIZE
S.=STEP   S.=STOP   TO=TO
no key word Ω LET


Error Reports

There† are† only three error conditions in Tiny BASICÆ† The† line ç
with† the error is printed out with a question mark† inserted† at ç
the point where the error is detected.ä
(1) "What?" means it doesn't understand you. †For example:

What?
260 LET A=B+3, C=(3+4?. X=4

(2©†"How?¢ means it understands you but doesn't know how†to do it.

How?
210 P?TINT "This"   <- where PRINT is misspelled

How?
310 LET A=B*C?+2 †  <- where B*C is larger than 2147483647

How?
380 GOTO 412? ††††† <- where 412 does not exist

(3)† "Sorry.¢ means it understands you and knows how to do it but ç
†††††there isn't enough memory to accomplish the task.


Error Corrections

If you notice an error in your entry before you press the CR, you ç
can delete the last character with the backspace (control-H©† key ç
or delete the entire line with control-XÆ† To correct a line, you ç
can† retype the line number and the correct commandsÆ† Tiny BASIC ç
wilÏ† replace the old line with the new oneÆ† To delete† a† line, ç
type† the† line† number† and† a† C“† onlyÆ† You† can† verify† the ç
corrections to line 'nnnnß by typing "LIS‘ nnnn¢ and pressing the ç
control-√ key while the line is being printed.
